---
title:  "[C++] const_cast μ—°μ‚°μ"
excerpt: ""

categories: [Language, C&#47;C&#43;&#43;]
tags: [C&#47;C&#43;&#43;]

toc: true
toc_sticky: true
 
date: 2024-10-04
last_modified_at: 2024-10-04
---

μλ£ν•μ„ λ³€ν™ν•  λ•, C μ–Έμ–΄λ” **μ•”μ‹μ  ν•λ³€ν™κ³Ό λ…μ‹μ  ν•λ³€ν™** 2κ°€μ§€κ°€ μ΅΄μ¬ν•©λ‹λ‹¤.  
κ°„λµν•κ² μ„¤λ…ν•λ©΄ μ•”μ‹μ  ν•λ³€ν™μ€ μ»΄νμΌλ¬κ°€ λ€μ‹  μν–‰ν•λ” ν•λ³€ν™μ΄κ³   
λ…μ‹μ  ν•λ³€ν™μ€ λ°λ€λ΅ ν”„λ΅κ·Έλλ¨Έκ°€ μ§μ ‘ ν•λ³€ν™μ„ μν–‰ν•λ” κ²ƒμ…λ‹λ‹¤.  

```c++
int i_num = 3.14;                   // μ•”μ‹μ 

double d_num_01 = double(i_num);    // λ…μ‹μ 
double d_num_02 = (double)i_num;    // λ…μ‹μ 
```

κ·Έλ ‡λ‹¤λ©΄ C++ λ” ν• λ³€ν™ μ—°μ‚°μκ°€ λ¬΄μ—‡μ΄ μμ„κΉμ”?  
C++ μ—μ„ μ‚¬μ©ν•λ” ν•λ³€ν™ μ—°μ‚°μλ” μ•„λμ 4κ°€μ§€κ°€ μμΌλ©° λ¨λ‘ λ‹¤λ¥Έ μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤.  

```c++
static_cast<data_type>(Data);
const_cast<data_type>(Data);
dynamic_cast<data_type>(Data);
reinterpret_cast<data_type>(Data);
```

μ΄λ² ν¬μ¤νΈμ—μ„λ” const_cast μ—°μ‚°μμ— λ€ν•΄μ„ μ•μ•„λ³΄κ² μµλ‹λ‹¤.  

<br/>

# const ν‚¤μ›λ“
---

λ¨Όμ €, C++ μ—μ„ constλ” **λ¶λ³€ μƒμ** λ¥Ό μλ―Έν•©λ‹λ‹¤.  
μλ£ν• μ•μ— const λ¥Ό μ‘μ„±ν•κ³  μ„ μ–Έκ³Ό λ™μ‹μ— μ΄κΈ°ν™” ν•΄μ¤μ•Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤.  
μ¦‰, const λ¥Ό λ¶™μΈ λ°μ΄ν„°λ” μμ • λ¶κ°€λ¥(read only)μ΄λΌλ” λ»μ…λ‹λ‹¤.  

constλ¥Ό ν¬μΈν„°μ™€ ν•¨κ» μ‚¬μ©ν•λ©΄ ν¬μΈν„° μμ²΄ νΉμ€ λ€μƒμ— λ¶λ³€ μ„±μ§μ„ λ¶€μ—¬ν•  μ μμµλ‹λ‹¤.  

```c++
int num_01 = 1;
int num_02 = 2;

// const (int*)μ™€ λ™μΌ
const int* ptr_01 = &num_01;

// [Compile Error] : 'ptr_01'μ λ€μƒμ€ λ¶λ³€. (κ°€λ¥΄ν‚¤λ” λ©”λ¨λ¦¬ λ³€κ²½ λ¶κ°€)
*ptr_01 = 10; 

// [Success] : num_01 μμ²΄κ°€ const μ†μ„±μ„ κ°–λ” κ²ƒμ΄ μ•„λ‹κΈ° λ•λ¬Έμ— κ°€λ¥
num_01 = 10;  


// ν¬μΈν„° μμ²΄κ°€ μƒμκ°€ λ¨
int* const ptr_02 = &num_02;

// [Success]
*ptr_02 = 10; 

// [Compile Error] : ν¬μΈν„° μμ²΄κ°€ λ¶λ³€μ΄λ―€λ΅ λ‚΄μ© λ³€κ²½ λ¶κ°€λ¥
ptr_02 = &num_03; 
```

<aside>
π’΅ λ§μ•½ β€num_0Nβ€™ λ°μ΄ν„°λ“¤μ΄ const intλ΅ μ„ μ–Έλμ—μ„ κ²½μ°, ν¬μΈν„°λ” λ°λ“μ‹ const int*κ°€ λμ–΄μ•Ό ν•©λ‹λ‹¤.  
</aside>

constλ” λ©¤λ²„ ν•¨μμ—λ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.  

```c++
class Student 
{
private:
    int grade = 0;

public:
    int getGrade() const
	{
		int temp = 1;
		temp += 1;

        // [Compile Error]
		// grade += 1;

		return temp + grade;
	}
};
```

λ©¤λ²„ ν•¨μλ¥Ό μƒμν™”(const) μ‹ν‚¬ κ²½μ°,  
ν•΄λ‹Ή ν•¨μ λ‚΄λ¶€μ—μ„λ” "λ¨λ“  λ©¤λ²„ λ³€μλ¥Ό μƒμν™” μ‹ν‚¨λ‹¤. λ‹¨, μ§€μ—­λ³€μλ” μμ™Έλ΅ ν•λ‹¤." λΌλ” κ·μΉ™μ΄ μ μ©λ©λ‹λ‹¤.  

λ”°λΌμ„ Student::getGrade( ) ν•¨μμ—μ„ tempλΌλ” μ§€μ—­ λ³€μλ” κ°’μ μμ •μ΄ κ°€λ¥μ§€λ§  
λ©¤λ²„ λ³€μμΈ gradeμ κ°’μ„ μμ •ν•  κ²½μ° Compile Errorκ°€ λ°μƒν•©λ‹λ‹¤.  

# const_cast
---

> const_cast<λ³€ν™ν•  νƒ€μ…>(λ€μƒ)

const_cast λ” ν¬μΈν„° νΉμ€ μ°Έμ΅°ν• λ°μ΄ν„°μ μƒμν™”(const)λ¥Ό λΉ„μƒμν™”(non-const)λ΅ λ³€ν™μ‹μΌ μ¤λ‹λ‹¤.  
κ·Έ μ™Έμ—λ„ λ¶€μ—¬λ volatile μ†μ„±μ„ non-volatileλ΅ λ³€ν™ν•  λ• μ‚¬μ©λκΈ°λ„ ν•©λ‹λ‹¤.  

```c++
char name[] = "Mgcllee";
const char* ptr_01 = name;

// [Fail]: ptr_01 μ΄ const μ†μ„±μ„ κ°–κ³  μμΌλ―€λ΅ μμ • λ¶κ°€
// ptr_01[0] = 'm';

char* ptr_02 = const_cast<char*>(ptr_01);

// [Success]: λΉ„μƒμλ΅ λ³€ν™ν•μ€μΌλ―€λ΅ κ°€λ¥
ptr_02[0] = 'm';
cout << ptr_02; // mgcllee μ¶λ ¥


int age = 100;
const int& next_year_age = age;

// [Fail]: next_year_age μ΄ const μ†μ„±μ„ κ°–κ³  μμΌλ―€λ΅ μμ • λ¶κ°€
// next_year_age += 1;

int& next_age = const_cast<int&>(next_year_age);

// [Success]: λΉ„μƒμλ΅ λ³€ν™ν•μ€μΌλ―€λ΅ κ°€λ¥
next_age += 1;
cout << next_age;
```

<br/>

# κ²°λ΅ 

const_cast λ” μ£Όλ΅ μƒμμ„±(const)μ„ μ κ±°ν•λ”λ° μ‚¬μ©λ©λ‹λ‹¤.  
κ·Έλ ‡κΈ° λ•λ¬Έμ— λ‹¤λ¥Έ μΊμ¤ν… μ—°μ‚°μμ²λΌ μ „ν€ λ‹¤λ¥Έ λ°μ΄ν„° νƒ€μ…μΌλ΅μ λ³€ν™μ€ λ¶κ°€λ¥ν•©λ‹λ‹¤.  
λ€μ‹  λ‹¤λ¥Έ μΊμ¤ν… μ—°μ”μλ” μƒμμ„±μ„ μ κ±°ν•  μ μ—†μµλ‹λ‹¤.  
<br/>
